<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C√≥mpralo T√∫ | Tu tienda en l√≠nea en Cuba</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* REGISTRO Y CARRITO */
    #registroModal, #carritoModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
    }
    .modal h2 {
      margin-bottom: 1rem;
      color: #2e7d32;
    }
    .modal input, .modal textarea {
      width: 100%;
      padding: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .modal button {
      background-color: #388e3c;
      color: white;
      padding: 0.75rem;
      width: 100%;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }
    .cerrar {
      float: right;
      font-size: 1.2rem;
      cursor: pointer;
      color: red;
    }
    #btnConfirmarPedido {
      margin: 2rem auto;
      display: block;
      background: #2e7d32;
      padding: 1rem 2rem;
      font-size: 1.1rem;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <header>
    <h1>C√≥mpralo T√∫</h1>
    <nav>
      <ul>
        <li><a href="#">Inicio</a></li>
        <li><a href="#alimentos">Alimentos</a></li>
        <li><a href="#aseo">Aseo</a></li>
        <li><a href="#electrodomesticos">Electrodom√©sticos</a></li>
        <li><a href="#" id="abrirCarrito">üõí Mi Lista</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="banner">
      <h2>¬°Bienvenido a tu tienda de confianza en Cuba!</h2>
      <p>Agrega lo que necesites, conf√≠rmanos tu pedido y te lo llevamos. Sin pagos en l√≠nea.</p>
    </section>

    <section class="productos" id="alimentos">
      <h2>Alimentos</h2>
      <div class="grid">
        <div class="producto" data-nombre="Arroz 1kg" data-precio="1.50">
          <img src="https://images.unsplash.com/photo-1606787366850-de6330128bfc?w=400" alt="Arroz">
          <h3>Arroz 1kg</h3>
          <p>$1.50</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
        <div class="producto" data-nombre="Frutas variadas" data-precio="3.00">
          <img src="https://images.unsplash.com/photo-1576402187878-974f8e62358c?w=400" alt="Frutas">
          <h3>Frutas variadas</h3>
          <p>$3.00</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
      </div>
    </section>

    <section class="productos" id="aseo">
      <h2>Aseo</h2>
      <div class="grid">
        <div class="producto" data-nombre="Detergente l√≠quido" data-precio="2.50">
          <img src="https://images.unsplash.com/photo-1581578017424-9437cf236e1c?w=400" alt="Detergente">
          <h3>Detergente l√≠quido</h3>
          <p>$2.50</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
        <div class="producto" data-nombre="Jab√≥n de ba√±o" data-precio="1.20">
          <img src="https://images.unsplash.com/photo-1581931951901-8f11f16c0d9f?w=400" alt="Jab√≥n">
          <h3>Jab√≥n de ba√±o</h3>
          <p>$1.20</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
      </div>
    </section>

    <section class="productos" id="electrodomesticos">
      <h2>Electrodom√©sticos</h2>
      <div class="grid">
        <div class="producto" data-nombre="Licuadora" data-precio="25.00">
          <img src="https://images.unsplash.com/photo-1587731457760-b95a65c5d5d7?w=400" alt="Licuadora">
          <h3>Licuadora</h3>
          <p>$25.00</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
        <div class="producto" data-nombre="Microondas" data-precio="70.00">
          <img src="https://images.unsplash.com/photo-1606813902914-c53fbc62e259?w=400" alt="Microondas">
          <h3>Microondas</h3>
          <p>$70.00</p>
          <button class="agregar">Agregar a la lista</button>
        </div>
      </div>
    </section>

    <button id="btnConfirmarPedido">Confirmar Pedido</button>
  </main>

  <footer>
    <p>¬© 2025 C√≥mpralo T√∫. Todos los derechos reservados.</p>
  </footer>

  <!-- MODAL REGISTRO -->
  <div id="registroModal">
    <div class="modal">
      <span class="cerrar" onclick="document.getElementById('registroModal').style.display='none'">&times;</span>
      <h2>Registro</h2>
      <input type="text" id="nombreCompleto" placeholder="Nombre completo" required>
      <input type="text" id="direccion" placeholder="Direcci√≥n (en Cuba)" required>
      <input type="text" id="telefono" placeholder="Tel√©fono cubano" required>
      <button onclick="registrarUsuario()">Guardar</button>
    </div>
  </div>

  <!-- MODAL CARRITO -->
  <div id="carritoModal">
    <div class="modal">
      <span class="cerrar" onclick="document.getElementById('carritoModal').style.display='none'">&times;</span>
      <h2>Tu Lista de Compra</h2>
      <ul id="listaCarrito"></ul>
    </div>
  </div>

  <!-- FORMULARIO OCULTO PARA ENVIAR A FORMSubmit -->
  <form id="formPedido" action="https://formsubmit.co/compralotu.bejucal@gmail.com" method="POST" style="display:none">
    <input type="hidden" name="nombre" id="inputNombre">
    <input type="hidden" name="direccion" id="inputDireccion">
    <input type="hidden" name="telefono" id="inputTelefono">
    <textarea name="pedido" id="inputPedido"></textarea>
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_next" value="https://tusitio.com/gracias.html">
  </form>

  <script>
    let usuario = null;
    let carrito = [];

    function registrarUsuario() {
      const nombre = document.getElementById('nombreCompleto').value;
      const direccion = document.getElementById('direccion').value;
      const telefono = document.getElementById('telefono').value;
      if (!nombre || !direccion || !telefono) return alert("Todos los campos son obligatorios.");
      usuario = { nombre, direccion, telefono };
      document.getElementById('registroModal').style.display = 'none';
      alert("¬°Registro exitoso! Ahora puedes agregar productos a tu lista de compra.");
    }

    document.querySelectorAll('.agregar').forEach(btn => {
      btn.addEventListener('click', () => {
        if (!usuario) {
          document.getElementById('registroModal').style.display = 'flex';
          return;
        }
        const producto = btn.parentElement;
        const nombre = producto.dataset.nombre;
        carrito.push(nombre);
        alert(`${nombre} a√±adido a tu lista.`);
      });
    });

    document.getElementById('abrirCarrito').onclick = () => {
      if (!usuario) return alert("Debes registrarte primero.");
      const lista = document.getElementById('listaCarrito');
      lista.innerHTML = '';
      carrito.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        lista.appendChild(li);
      });
      document.getElementById('carritoModal').style.display = 'flex';
    };

    document.getElementById('btnConfirmarPedido').onclick = () => {
      if (!usuario || carrito.length === 0) {
        alert("Debes registrarte y agregar productos a tu lista.");
        return;
      }
      document.getElementById('inputNombre').value = usuario.nombre;
      document.getElementById('inputDireccion').value = usuario.direccion;
      document.getElementById('inputTelefono').value = usuario.telefono;
      document.getElementById('inputPedido').value = carrito.join(', ');
      document.getElementById('formPedido').submit();
    }
  </script>
</body>
</html>

